<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" type="text/css" href="https://miro.com/app/static/styles.1.0.css" />
    <script type="text/javascript" src="https://miro.com/app/static/sdk.1.1.js"></script>
</head>

<body>
    <div style="width: 100%; height: 100%; display: flex;">
        <div style="display: flex; width: 100%; justify-content: center; align-items: center; flex-direction: column;">

            <div style="width: 100px; height: 100px;">
                <svg viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <g id="icon-24" stroke="currentColor" stroke-width="0.5" fill="none" fill-rule="evenodd">
                        <rect x="4" y="4" width="6" height="6" />
                        <circle cx="17" cy="7" r="3" />
                        <polygon points="7,14 4,20 10,20" />
                        <rect x="14" y="14" width="6" height="6" />
                    </g>
                </svg>
            </div>

            <h2 style="margin: 30px 0;">Please, authorize Dice PostIt to roll dice</h2>
            <button class="miro-btn miro-btn--primary">Authorize</button>
        </div>
    </div>
    <script>
        document.querySelector('button').addEventListener('click', function() {
            const authorizeOptions = {
                response_type: 'token',
                redirect_uri: 'https://' + window.location.host + '/MiroDicePostIt/success.html'
            }
            miro.authorize(authorizeOptions)
                .then(() => miro.getToken())
                .then((token) => {
                    if (token) {
                        miro.board.ui.closeModal('success')
                    } else {
                        console.log('Something went wrong')
                    }
                })
        })
    </script>
</body>

</html>